# üè∑Ô∏è Guide de Configuration Google Tag Manager

Ce guide vous aide √† configurer Google Tag Manager (GTM) pour g√©rer tous vos tags marketing de mani√®re centralis√©e.

---

## üìä Vos Identifiants

```
Google Tag Manager (GTM)
‚îú‚îÄ Container ID : GT-5DHVDLCW

Google Analytics 4 (GA4)
‚îú‚îÄ ID de mesure : G-MHSXEJMW8C
‚îú‚îÄ ID de flux   : 12236663569
```

---

## ‚úÖ √âtape 1 : Configuration Locale (.env.local)

Ajoutez ces lignes dans votre fichier `.env.local` :

```bash
# Google Tag Manager
NEXT_PUBLIC_GTM_ID=GT-5DHVDLCW

# Google Analytics 4
NEXT_PUBLIC_GA_ID=G-MHSXEJMW8C
```

---

## üöÄ √âtape 2 : Configuration Vercel (Production)

1. Allez sur [vercel.com/dashboard](https://vercel.com/dashboard)
2. S√©lectionnez votre projet **OMADIGITAL**
3. **Settings** ‚Üí **Environment Variables**
4. Ajoutez ces 2 variables :

### Variable 1 : GTM
```
Key: NEXT_PUBLIC_GTM_ID
Value: GT-5DHVDLCW
Environment: ‚òëÔ∏è Production ‚òëÔ∏è Preview ‚òëÔ∏è Development
```

### Variable 2 : GA4
```
Key: NEXT_PUBLIC_GA_ID
Value: G-MHSXEJMW8C
Environment: ‚òëÔ∏è Production ‚òëÔ∏è Preview ‚òëÔ∏è Development
```

5. Cliquez sur **Save**
6. Red√©ployez votre site

---

## üéØ √âtape 3 : Configurer GA4 dans GTM

### Option A : Via GTM (Recommand√©)

1. Allez sur [tagmanager.google.com](https://tagmanager.google.com)
2. S√©lectionnez votre conteneur **GT-5DHVDLCW**
3. Cliquez sur **Balises** ‚Üí **Nouvelle**

#### Configuration de la Balise GA4

**Nom de la balise :** Google Analytics 4 - Configuration

**Type de balise :**
- S√©lectionnez **Google Analytics : Configuration GA4**

**Param√®tres :**
- **ID de mesure** : `G-MHSXEJMW8C`
- **Envoyer un √©v√©nement de page vue** : ‚òëÔ∏è Activ√©

**D√©clencheur :**
- S√©lectionnez **All Pages** (Toutes les pages)

**Cliquez sur Enregistrer**

#### Cr√©er des √âv√©nements Personnalis√©s

**1. √âv√©nement : Demande de Devis**

- **Nom** : Quote Request
- **Type** : √âv√©nement GA4
- **Nom de l'√©v√©nement** : `quote_request`
- **D√©clencheur** : Clic sur bouton "Demander un devis"

**2. √âv√©nement : Contact WhatsApp**

- **Nom** : WhatsApp Contact
- **Type** : √âv√©nement GA4
- **Nom de l'√©v√©nement** : `whatsapp_contact`
- **D√©clencheur** : Clic sur lien WhatsApp

**3. √âv√©nement : Appel T√©l√©phonique**

- **Nom** : Phone Call
- **Type** : √âv√©nement GA4
- **Nom de l'√©v√©nement** : `phone_call`
- **D√©clencheur** : Clic sur num√©ro de t√©l√©phone

**4. √âv√©nement : Inscription Newsletter**

- **Nom** : Newsletter Signup
- **Type** : √âv√©nement GA4
- **Nom de l'√©v√©nement** : `newsletter_signup`
- **D√©clencheur** : Soumission formulaire newsletter

**5. √âv√©nement : Interaction Chatbot**

- **Nom** : Chatbot Interaction
- **Type** : √âv√©nement GA4
- **Nom de l'√©v√©nement** : `chatbot_interaction`
- **D√©clencheur** : Ouverture du chatbot vocal

### Option B : GA4 Direct (Actuel)

Si vous pr√©f√©rez garder GA4 directement dans le code (sans passer par GTM), c'est d√©j√† configur√© ! Vous pouvez d√©sactiver la balise GA4 dans GTM pour √©viter les doublons.

---

## üîç √âtape 4 : Cr√©er des D√©clencheurs

### D√©clencheur 1 : Clic sur Bouton Devis

1. **D√©clencheurs** ‚Üí **Nouveau**
2. **Nom** : Click - Quote Button
3. **Type** : Clic - Tous les √©l√©ments
4. **Conditions** :
   - Click Text contient "devis" OU "quote"
   - OU Click Classes contient "quote-button"

### D√©clencheur 2 : Clic WhatsApp

1. **Nom** : Click - WhatsApp
2. **Type** : Clic - Tous les √©l√©ments
3. **Conditions** :
   - Click URL contient "wa.me" OU "whatsapp"

### D√©clencheur 3 : Clic T√©l√©phone

1. **Nom** : Click - Phone
2. **Type** : Clic - Tous les √©l√©ments
3. **Conditions** :
   - Click URL contient "tel:"

### D√©clencheur 4 : Soumission Formulaire

1. **Nom** : Form Submit - Newsletter
2. **Type** : Envoi de formulaire
3. **Conditions** :
   - Form ID contient "newsletter"

---

## üìä √âtape 5 : Publier les Modifications

1. Cliquez sur **Envoyer** (en haut √† droite)
2. **Nom de la version** : "Configuration initiale GA4 + √âv√©nements"
3. **Description** : "Ajout GA4 et √©v√©nements de conversion"
4. Cliquez sur **Publier**

---

## ‚úÖ √âtape 6 : V√©rification

### Test en Mode Aper√ßu

1. Dans GTM, cliquez sur **Aper√ßu** (en haut √† droite)
2. Entrez l'URL : `https://www.omadigital.net`
3. Cliquez sur **Connect**
4. Naviguez sur votre site et v√©rifiez que :
   - ‚úÖ GTM se charge
   - ‚úÖ GA4 Configuration se d√©clenche
   - ‚úÖ Les √©v√©nements se d√©clenchent correctement

### Test dans GA4 Temps R√©el

1. Allez sur [analytics.google.com](https://analytics.google.com)
2. S√©lectionnez **G-MHSXEJMW8C**
3. **Rapports** ‚Üí **Temps r√©el**
4. Ouvrez votre site et v√©rifiez :
   - ‚úÖ Vous apparaissez dans les utilisateurs actifs
   - ‚úÖ Les √©v√©nements apparaissent dans "√âv√©nements par nom"

---

## üéØ √âtape 7 : Ajouter d'Autres Tags (Optionnel)

Avec GTM, vous pouvez facilement ajouter :

### Facebook Pixel

1. **Balises** ‚Üí **Nouvelle**
2. **Type** : Pixel Facebook
3. **ID Pixel** : Votre ID Facebook
4. **D√©clencheur** : All Pages

### LinkedIn Insight Tag

1. **Balises** ‚Üí **Nouvelle**
2. **Type** : LinkedIn Insight Tag
3. **ID Partenaire** : Votre ID LinkedIn
4. **D√©clencheur** : All Pages

### Hotjar

1. **Balises** ‚Üí **Nouvelle**
2. **Type** : HTML personnalis√©
3. **Code** : Script Hotjar
4. **D√©clencheur** : All Pages

---

## üìà Avantages de GTM

### ‚úÖ Gestion Centralis√©e
- Tous vos tags au m√™me endroit
- Pas besoin de modifier le code
- D√©ploiement instantan√©

### ‚úÖ Flexibilit√©
- Ajout/suppression de tags en quelques clics
- Tests A/B faciles
- Conditions de d√©clenchement avanc√©es

### ‚úÖ Performance
- Chargement asynchrone
- Pas de ralentissement du site
- Optimisation automatique

### ‚úÖ Collaboration
- Plusieurs utilisateurs
- Historique des versions
- Environnements de test

---

## üîß D√©pannage

### GTM ne se charge pas

1. **V√©rifiez `.env.local`**
   ```bash
   NEXT_PUBLIC_GTM_ID=GT-5DHVDLCW
   ```

2. **V√©rifiez le code source**
   - Ouvrez votre site
   - Clic droit ‚Üí Afficher le code source
   - Recherchez `GT-5DHVDLCW`
   - Vous devriez voir le script GTM

3. **V√©rifiez la console**
   - F12 ‚Üí Console
   - Pas d'erreurs JavaScript
   - `window.dataLayer` d√©fini

### Les √©v√©nements ne se d√©clenchent pas

1. **Mode Aper√ßu GTM**
   - Utilisez le mode aper√ßu pour d√©boguer
   - V√©rifiez que les d√©clencheurs se d√©clenchent

2. **V√©rifiez les conditions**
   - Les s√©lecteurs CSS sont corrects
   - Les URLs correspondent
   - Les classes/IDs existent

3. **V√©rifiez GA4**
   - Les √©v√©nements arrivent dans GA4 Temps R√©el
   - D√©lai de 1-2 secondes normal

---

## üìö Ressources

- [Documentation GTM](https://support.google.com/tagmanager)
- [Documentation GA4](https://support.google.com/analytics)
- [GTM Academy](https://tagmanageracademy.com)
- [Simo Ahava Blog](https://www.simoahava.com)

---

## ‚úÖ Checklist Finale

- [ ] `NEXT_PUBLIC_GTM_ID=GT-5DHVDLCW` dans `.env.local`
- [ ] `NEXT_PUBLIC_GA_ID=G-MHSXEJMW8C` dans `.env.local`
- [ ] Variables ajout√©es sur Vercel
- [ ] Site red√©ploy√©
- [ ] GA4 configur√© dans GTM
- [ ] √âv√©nements cr√©√©s dans GTM
- [ ] D√©clencheurs configur√©s
- [ ] Version publi√©e dans GTM
- [ ] Test en mode aper√ßu r√©ussi
- [ ] √âv√©nements visibles dans GA4 Temps R√©el

---

**Votre Google Tag Manager est pr√™t ! üéâ**

Vous pouvez maintenant g√©rer tous vos tags marketing depuis une interface centralis√©e sans modifier le code.
